<h1>Typeahead</h1>

<form
  class="gd-form"
  novalidate
  [formGroup]="reactiveForm!"
  (ngSubmit)="submit()"
>
  <gd-form-field [errors]="errors">
    <label class="gd-control-label" id="gd-gift-edit-name"> Item name </label>
    <gd-typeahead
      ariaDescribedBy="gd-gift-edit-name"
      formControlName="name"
      searchButtonIcon="shopping-cart"
      searchButtonText="Find"
      [searchFunction]="findProductFunction"
      [searchOnKeyUp]="false"
      [searchResultTemplate]="searchResultTemplate"
      [searchResultAction]="searchResultAction"
    >
    </gd-typeahead>
  </gd-form-field>

  <gd-form-field [errors]="errors">
    <gd-typeahead
      formControlName="name2"
      [searchFunction]="findProductFunction"
      [searchResultTemplate]="searchResultTemplate"
      [searchResultAction]="searchResultAction"
    >
    </gd-typeahead>
  </gd-form-field>
</form>

<ng-template let-result="result" #searchResultTemplate>
  <gd-media size="sm">
    <gd-media-thumbnail>
      <gd-thumbnail size="fill" [imageSource]="result.imageUrl"> </gd-thumbnail>
    </gd-media-thumbnail>
    <gd-media-content>
      <gd-media-header>
        <gd-media-heading>
          {{ result.name }}
        </gd-media-heading>
      </gd-media-header>
      <gd-media-body>
        <div class="gd-text-price">${{ result.price }}</div>
      </gd-media-body>
    </gd-media-content>
    <gd-media-controls>
      <a
        class="gd-text-small"
        target="_blank"
        title="Open this product in another browser window."
        [attr.href]="result.url"
        ><gd-icon icon="external-link-alt"></gd-icon>&nbsp;Amazon.com</a
      >
    </gd-media-controls>
  </gd-media>
</ng-template>
